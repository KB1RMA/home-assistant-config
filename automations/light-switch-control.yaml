# Kitchen Light Switch Control - Philips Hue Dimmer
# Controls all lights in the Kitchen area using a Philips Hue dimmer switch
# Switch entity: sensor.kitchen_hue_switch_action
# Target area: kitchen (all light entities assigned to Kitchen area)

# BUTTON FUNCTIONS:
# - On Button (on_press_release): Always turn all kitchen lights on
# - Off Button (off_press_release): Turn all kitchen lights off
# - Up Button (up_press_release): Increase brightness by 10%
# - Down Button (down_press_release): Decrease brightness by 10%

# SETUP REQUIREMENTS:
# 1. Philips Hue dimmer switch integrated and creating sensor.kitchen_hue_switch_action
# 2. All kitchen lights must be assigned to "Kitchen" area as light entities (not switch entities)
# 3. Light entities (not switch entities) must be used for area targeting to work properly

# KITCHEN CONTROL (using kitchen_hue_switch with action attribute)
- id: '1726494000003'
  alias: Light Switch - Kitchen Control
  description: Control kitchen lights with Philips Hue dimmer switch using action attribute
  variables:
    switch_entity: "sensor.kitchen_hue_switch_action"
    room_name: "Kitchen"
    scenes:
      bright: "scene.kitchen_bright"
      dimmed: "scene.kitchen_dimmed"
      read: "scene.kitchen_read"
      relax: "scene.kitchen_relax"
      nightlight: "scene.kitchen_nightlight"
  triggers:
  - trigger: state
    entity_id: "sensor.kitchen_hue_switch_action"
    not_to:
    - ""
    - "null"
  conditions:
  - condition: template
    value_template: "{{ trigger.to_state.state is defined and trigger.to_state.state != '' }}"
  actions:
  - choose:
    # On Button: Always turn lights on
    - conditions:
      - condition: template
        value_template: "{{ 'on_' in trigger.to_state.state }}"
      sequence:
      - action: light.turn_on
        target:
          area_id: "kitchen"
    
    # Up Button: Brighten lights
    - conditions:
      - condition: template
        value_template: "{{ 'up_' in trigger.to_state.state }}"
      sequence:
      - action: light.turn_on
        target:
          area_id: "kitchen"
        data:
          brightness_step_pct: 10
    
    # Down Button: Dim lights
    - conditions:
      - condition: template
        value_template: "{{ 'down_' in trigger.to_state.state }}"
      sequence:
      - action: light.turn_on
        target:
          area_id: "kitchen"
        data:
          brightness_step_pct: -10
    
    # Off Button: Turn off lights or dim
    - conditions:
      - condition: template
        value_template: "{{ 'off_' in trigger.to_state.state }}"
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: "{{ 'press_release' in trigger.to_state.state }}"
          sequence:
          - action: light.turn_off
            target:
              area_id: "kitchen"
        - conditions:
          - condition: template
            value_template: "{{ 'hold' in trigger.to_state.state }}"
          sequence:
          - action: script.activate_room_scene
            data:
              scene_entity: "{{ scenes.dimmed }}"
  mode: single